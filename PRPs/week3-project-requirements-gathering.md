name: "Week 3 - Basic Project Requirements Gathering"
description: |

## Purpose
Implement `/gather-project-requirements` command for Week 3 of the requirements gathering system. This command will gather project-level requirements through interactive conversation, generate or update PLANNING.md files, and support external document input for comprehensive project scope definition.

## Core Principles
1. **Interactive Conversation**: Guide users through essential project questions
2. **File Flexibility**: Support new file creation, updates to existing PLANNING.md, and external document parsing
3. **Simple Structure**: Start with 5 essential sections, expandable in future weeks
4. **Seamless Integration**: Output compatible with existing Bootstrap workflows
5. **Context Preservation**: Maintain project context for feature-level requirements

---

## Goal
Create a command that gathers project-level requirements through structured conversation, generating comprehensive PLANNING.md documentation that serves as the foundation for feature development. Support both new projects and updates to existing ones.

## Why
- **Project Clarity**: Establish clear project vision before feature development
- **Scope Management**: Define boundaries and constraints upfront
- **Feature Alignment**: Ensure all features serve project goals
- **Documentation**: Create living project documentation
- **Stakeholder Communication**: Clear articulation of project intent

## What
A command that:
- Accepts optional file argument for updates or external docs
- Asks core project questions (What, Who, Why)
- Generates structured PLANNING.md with 5 essential sections
- Updates existing PLANNING.md preserving user content
- Parses external documents (specs, reports) for context
- Provides foundation for Week 4 feature integration

### Success Criteria
- [ ] Command accepts optional file argument
- [ ] Core questions gather essential project info
- [ ] PLANNING.md generated with proper structure
- [ ] Existing files updated without data loss
- [ ] External documents parsed for context
- [ ] Output ready for feature development workflow

## All Needed Context

### Documentation & References
```yaml
# MUST READ - Include these in your context window
- file: .claude/commands/gather-feature-requirements.md
  why: Reference implementation for conversation patterns and structure
  
- file: PLANNING.md
  why: Existing project planning file to understand current structure
  
- file: designs/014-feature-requirements-gathering/design.md
  why: Complete design specification with Week 3 requirements
  
- doc: https://docs.anthropic.com/en/docs/claude-code
  section: Command creation documentation
  critical: Commands are markdown files that Claude interprets
  
- pattern: Interactive conversation flow from gather-feature-requirements
  why: Reuse proven conversation patterns for consistency
```

### Current Codebase Structure
```bash
Bootstrap/
├── .claude/
│   ├── commands/
│   │   ├── gather-feature-requirements.md  # Reference pattern
│   │   └── ... (other commands)
│   └── templates/
│       └── ... (template files)
├── PLANNING.md                    # Existing project planning file
├── features/                      # Feature specifications
└── designs/                       # Design documents
```

### Desired PLANNING.md Structure (5 Essential Sections)
```markdown
# [Project Name] Planning

## Project Overview
What is this project? Brief description and purpose.

## Goals & Objectives
What are we trying to achieve? Measurable objectives.

## Target Users
Who will use this? Primary and secondary audiences.

## Scope & Boundaries
What's included and explicitly excluded?

## Success Metrics
How will we measure success?

---
*Generated by gather-project-requirements command*
*Last updated: {date}*
```

### Known Gotchas & Patterns
```markdown
# CRITICAL: File Handling Patterns
# When file argument provided:
# - If file is PLANNING.md: Update mode (preserve existing content)
# - If file is other .md/.txt: Parse for context, create new PLANNING.md
# - If no file: Create new PLANNING.md from scratch

# PATTERN: Conversation Structure (from gather-feature-requirements)
# 1. Check for optional argument
# 2. Extract any initial context
# 3. Identify missing components
# 4. Ask targeted questions
# 5. Generate output file

# GOTCHA: Preserve User Content
# When updating existing PLANNING.md:
# - Parse existing sections
# - Preserve user additions
# - Update only gathered sections
# - Add timestamp for tracking
```

## Implementation Blueprint

### Task 1: Create Command File Structure

CREATE .claude/commands/gather-project-requirements.md:
```markdown
# Gather Project Requirements

## Arguments: $ARGUMENTS

Interactive project requirements gathering to create or update PLANNING.md. Accepts optional file for updates or external document context.

## When to Use This Command

**Use `gather-project-requirements` when:**
- Starting a new project
- Updating existing project scope
- Converting external specs to PLANNING.md
- Establishing project vision before features
- Defining success metrics

**Skip when:**
- PLANNING.md is already comprehensive
- Project scope is well-defined
- Only doing feature-level work

## Process

### 1. **Check for File Argument**
   - If $ARGUMENTS contains file path:
     - Check if file is PLANNING.md (update mode)
     - Check if file is external doc (parse mode)
     - Read and extract existing content
   - If no argument: Start fresh

### 2. **Parse Existing Content** (if file provided)
   
   For PLANNING.md:
   - Extract each section content
   - Identify what needs updating
   - Preserve custom sections
   
   For external docs:
   - Extract project description
   - Look for goals/objectives
   - Identify stakeholders
   - Note constraints/scope

### 3. **Core Questions Flow**
   
   Ask based on what's missing:
   
   **Project Overview:**
   "What is this project? Provide a brief description of what you're building."
   
   **Goals & Objectives:**
   "What are the main goals? List 2-3 key objectives (e.g., 'Enable X', 'Reduce Y by 50%')"
   
   **Target Users:**
   "Who will use this? Describe primary users and any secondary audiences."
   
   **Scope & Boundaries:**
   "What's included in this project? What's explicitly out of scope?"
   
   **Success Metrics:**
   "How will you measure success? (e.g., 'User adoption > 100', 'Response time < 2s')"

### 4. **Generate/Update PLANNING.md**
   - Apply planning.template.md from .claude/templates/
   - Preserve any custom sections (if updating)
   - Add generation/update timestamp
   - Format with proper markdown
   - Use Write tool for new files, Edit for updates

### 5. **Report Success**
   - Show file path created/updated
   - Suggest next steps (feature gathering)
   - Highlight any gaps for future refinement
```

### Task 2: Create PLANNING.md Template

CREATE .claude/templates/planning.template.md:
```markdown
# {Project Name} Planning

## Project Overview

{project_description}

## Goals & Objectives

{goals_and_objectives}

## Target Users

{target_users}

## Scope & Boundaries

### In Scope
{in_scope_items}

### Out of Scope
{out_of_scope_items}

## Success Metrics

{success_metrics}

---
*Generated by gather-project-requirements command*
*Last updated: {date}*
```

This single template keeps things simple for Week 3. The command will:
1. Gather information through conversation
2. Fill in the template placeholders
3. Save as PLANNING.md

Future weeks can expand with more sophisticated templating if needed.

### Task 3: Add External Document Parsing Logic

APPEND to command under "Parse Existing Content" section:
```markdown
## External Document Keywords
When parsing external documents, look for:
- Project titles, headings → Project name
- Executive summaries → Project overview
- "objective", "goal", "aim" → Goals section
- "stakeholder", "user", "audience" → Target users
- "include", "exclude", "boundary" → Scope
- "success", "KPI", "measure" → Metrics
```

## Validation Loop

### Level 1: Command Creation
```bash
# Verify command file exists
ls -la .claude/commands/gather-project-requirements.md

# Check markdown structure is valid
# Expected: Proper markdown with all sections
```

### Level 2: Functional Tests

Test Case 1: New Project (no argument)
```bash
# Simulate: /gather-project-requirements
# Expected:
# - Asks all 5 core questions
# - Generates new PLANNING.md
# - Includes all sections
```

Test Case 2: Update Existing PLANNING.md
```bash
# Simulate: /gather-project-requirements PLANNING.md
# Expected:
# - Reads existing content
# - Preserves custom sections
# - Updates only gathered info
# - Updates timestamp
```

Test Case 3: External Document Input
```bash
# Simulate: /gather-project-requirements specs/project-spec.md
# Expected:
# - Parses external document
# - Extracts available context
# - Asks for missing info
# - Generates new PLANNING.md
```

### Level 3: Content Validation
```bash
# Check generated PLANNING.md has all required sections
grep -q "## Project Overview" PLANNING.md && echo "✓ Project Overview"
grep -q "## Goals & Objectives" PLANNING.md && echo "✓ Goals & Objectives"
grep -q "## Target Users" PLANNING.md && echo "✓ Target Users"
grep -q "## Scope & Boundaries" PLANNING.md && echo "✓ Scope & Boundaries"
grep -q "## Success Metrics" PLANNING.md && echo "✓ Success Metrics"

# Verify metadata
grep -q "Generated by gather-project-requirements" PLANNING.md && echo "✓ Attribution"
grep -q "Last updated:" PLANNING.md && echo "✓ Timestamp"
```

### Level 4: Integration Test
```bash
# Create project requirements
/gather-project-requirements

# Use in feature gathering
/gather-feature-requirements
# Should reference project context

# Expected: Feature aligns with project goals
```

## Final Validation Checklist
- [ ] Command file created at .claude/commands/gather-project-requirements.md
- [ ] Accepts optional file argument correctly
- [ ] Core questions gather essential info
- [ ] PLANNING.md generated with 5 sections
- [ ] Existing files updated without data loss
- [ ] External documents parsed for context
- [ ] Timestamps and attribution included
- [ ] Output compatible with Bootstrap workflow
- [ ] Clear user prompts and feedback
- [ ] Next steps suggested

---

## Anti-Patterns to Avoid
- ❌ Don't overwrite user's custom sections in PLANNING.md
- ❌ Don't ask redundant questions if info exists
- ❌ Don't lose context from external documents
- ❌ Don't create overly complex section structure (keep to 5 for Week 3)
- ❌ Don't break existing PLANNING.md format
- ❌ Don't forget timestamps for tracking

## Implementation Notes

1. **Start Simple**: Focus on 5 core sections, expand in Week 4-5
2. **Preserve Content**: Never lose user's existing work
3. **Context Aware**: Use external docs to reduce questions
4. **Clear Prompts**: Guide users with examples
5. **Bootstrap Integration**: Ensure compatibility with existing workflow

## Confidence Score: 8/10

High confidence due to:
- Clear design specification from Week 3 requirements
- Existing patterns from gather-feature-requirements
- Simple section structure (only 5 sections)
- Well-defined file handling logic

Slight uncertainty around:
- External document parsing accuracy
- Optimal question flow for project-level info
- Balance between thoroughness and simplicity